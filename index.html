<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>함수형 프로그래밍과 JavaScript ES6+</title>
    <script src="lib/_fx.js"></script>
  </head>
  <body>
    Check the console!

    <script>
      const products = [
        { name: '반팔티', price: 15000 },
        { name: '긴팔티', price: 20000 },
        { name: '핸드폰케이스', price: 15000 },
        { name: '후드티', price: 30000 },
        { name: '바지', price: 25000 }
      ];
    </script>

    <script>
      const add = (a, b) => a + b;

      console.log(
        reduce(
          add,
          map(p => p.price,
            filter(p => p.price < 20000, products))));

      console.log(
        reduce(
          add,
          filter(price => price < 20000,
            map(p => p.price, products))));
    </script>

    <script>
      // go, pipe
      const go = (...args) => reduce((a, f) => f(a), args);
      const pipe = (f, ...fs) => (...as) => go(f(...as), ...fs);

      go(
        add(0, 1),
        a => a + 10,
        a => a + 100,
        console.log
      )

      const f = pipe(
        (a, b) => a + b,
        a => a + 10,
        a => a + 100
      );

      console.log(f(0, 1));
    </script>

    <script>
      go(
        products,
        products => filter(p => p.price < 20000, products),
        products => map(p => p.price, products),
        products => reduce(add, products),
        console.log
      )
    </script>
  </body>
</html>
